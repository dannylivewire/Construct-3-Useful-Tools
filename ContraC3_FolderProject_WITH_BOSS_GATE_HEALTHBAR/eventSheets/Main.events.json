{
  "type": "c3-event-clipboard",
  "version": 1,
  "text": "// === MAIN (Player + Weapons + HUD) ===\n// Instance variables (Player): HP=3, Lives=3, FireCD=0, Weapon=\"basic\", Facing=1, Aim=0, AimLock=0\n// Global: CheckpointX, CheckpointY\n\nOn start of layout\n\u2192 Player: Set HP to 3\n\u2192 System: Set global variable Lives to 3\n\u2192 System: Set global variable CheckpointX to Player.X\n\u2192 System: Set global variable CheckpointY to Player.Y\n\nEvery tick\n\u2192 UI_Health: Set text to \"HP: \" & Player.HP\n\u2192 UI_Lives: Set text to \"Lives: \" & Lives\n\n// Movement\nKeyboard: Left arrow OR A is down\n\u2192 Player: Platform \u2192 Simulate control Left\n\u2192 Player: Set instance variable Facing to -1\nKeyboard: Right arrow OR D is down\n\u2192 Player: Platform \u2192 Simulate control Right\n\u2192 Player: Set instance variable Facing to 1\nKeyboard: (Space OR W OR Up) is pressed\n\u2192 Player: Platform \u2192 Simulate control Jump\n\n// Flip\nSystem: Compare variable Player.Facing = -1\n\u2192 Player: Set mirrored\nElse\n\u2192 Player: Set not mirrored\n\n// Aim (Up/Down 45\u00b0) and Lock\nEvery tick\n\u2192 Player: Set instance variable Aim to 0\nKeyboard: Up arrow is down \u2192 Player: Set Aim to -45\nKeyboard: Down arrow is down \u2192 Player: Set Aim to 45\nKeyboard: Left Shift is down \u2192 Player: Set AimLock to 1\nElse \u2192 Player: Set AimLock to 0\n\n// Fire cooldown tick\nEvery tick\nSystem: Player.FireCD > 0 \u2192 Player: Subtract dt from FireCD\n\n// Shooting (J or Left mouse)\nKeyboard: (J is down) OR Mouse: On button Left Down\nSystem: Player.FireCD <= 0\n\u2192 (Sub-event by Weapon)\n    System: Compare text Player.Weapon = \"basic\"\n    \u2192 System: Create object Bullet_basic on layer \"Main\" at (Player.ImagePointX(1), Player.ImagePointY(1))\n    \u2192 Bullet_basic: Set angle to angle(Player.X, Player.Y, Player.X + 100*Player.Facing, Player.Y + Player.Aim)\n    \u2192 Bullet_basic: Set bullet speed to 900\n    \u2192 Player: Set FireCD to 0.12\n\n    System: Else (Weapon = \"spread\")\n    \u2192 Repeat 3 times (index -1,0,+1)\n      \u2192 System: Create object Bullet_spread at (Player.ImagePointX(1), Player.ImagePointY(1))\n      \u2192 Bullet_spread: Set angle to angle(Player.X, Player.Y, Player.X + 100*Player.Facing, Player.Y + Player.Aim + loopindex*10)\n      \u2192 Bullet_spread: Set bullet speed to 800\n    \u2192 Player: Set FireCD to 0.20\n\n    System: Else (Weapon = \"laser\")\n    \u2192 System: Create object Bullet_laser at (Player.ImagePointX(1), Player.ImagePointY(1))\n    \u2192 Bullet_laser: Set angle to angle(Player.X, Player.Y, Player.X + 100*Player.Facing, Player.Y + Player.Aim)\n    \u2192 Bullet_laser: Set bullet speed to 1200\n    \u2192 Player: Set FireCD to 0.30\n\n// Power-ups\nOn Player collides with Power_Spread\n\u2192 Player: Set Weapon to \"spread\"\n\u2192 Destroy Power_Spread\n\u2192 Start Timer \"SpreadTimeout\" for 20.0 seconds (once)\nOn Timer \"SpreadTimeout\"\n\u2192 Player: Set Weapon to \"basic\"\n\nOn Player collides with Power_Rapid\n\u2192 Player: Set Weapon to \"laser\"\n\u2192 Destroy Power_Rapid\n\u2192 Start Timer \"LaserTimeout\" for 12.0 seconds (once)\nOn Timer \"LaserTimeout\"\n\u2192 Player: Set Weapon to \"basic\"\n\nOn Player collides with Power_Health\n\u2192 Player: Add 1 to HP\n\u2192 Destroy Power_Health\n\n// Bullet collisions\nBullet_basic on collision with Enemy \u2192 Enemy: Subtract 1 from HP \u2192 Destroy Bullet_basic\nBullet_spread on collision with Enemy \u2192 Enemy: Subtract 1 from HP \u2192 Destroy Bullet_spread\nBullet_laser on collision with Enemy \u2192 Enemy: Subtract 2 from HP \u2192 Destroy Bullet_laser"
}